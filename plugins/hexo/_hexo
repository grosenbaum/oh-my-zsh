#compdef hexo
#autoload

# hexo zsh completion

local -a _1st_arguments
_1st_arguments=(
  'clean:  Remove generated files and cache'
  'config:  Get or set configurations'
  'deploy:  Deploy your website'
  'generate:  Generate static files'
  'help:  Get help on a command'
  'init:  Create a new Hexo folder'
  'list:  List the information of the sit'
  'migrate:  Migrate your site from other system to Hexo'
  'new:  Create a new post'
  'publish:  Moves a draft post from _drafts to _posts folder'
  'render:  Render files with renderer plugins'
  'server:  Start the server'
  'version:  Display version information'
)

local -a _hexo_arguments
_hexo_arguments=(
  '--config:Specify config file instead of using _config.yml'
  '--cwd:Specify the CWD'
  '--debug:Display all verbose messages in the terminal'
  '--draft:Display draft posts'
  '--safe:Disable all plugins and scripts'
  '--silent:Hide output on console'
)


__task_list ()
{
    local expl
    declare -a tasks

    tasks=(init help version)

    _wanted tasks expl 'help' compadd $tasks
}

local expl

local curcontext="$curcontext" state line
typeset -A opt_args

_arguments -C \
    ':command:->command' \
    '*::options:->options'

case $state in
  (command)
      _describe -t commands "gem subcommand" _1st_arguments
      return
  ;;

  (options)
    case $line[1] in
      (help)
         _arguments ':feature:__task_list'
      ;;
    esac
  ;;
esac
